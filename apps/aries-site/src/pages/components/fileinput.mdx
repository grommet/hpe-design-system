import { AccessibilitySection, Example } from '../../layouts';
import { ExampleImagePreview } from '../../components';
import {
  FileInputConfirmRemoveExample,
  FileInputSimpleExample,
  FileInputMultipleExample,
  FileInputValidationExample,
} from '../../examples/components/fileinput';

<Example
  componentName="FileInput"
  docs="https://v2.grommet.io/fileinput?theme=hpe"
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/apps/aries-site/src/examples/components/fileinput/FileInputSimpleExample.js"
  figma="https://www.figma.com/design/HDckqS2MWhINfC8EIQPMV1/HPE-Design-System-Components-V2?m=auto&node-id=4005-3&t=ZqPsisuevR3KPp96-1"
  grommetSource="https://github.com/grommet/grommet/blob/master/src/js/components/FileInput/FileInput.js"
>
  <FileInputSimpleExample />
</Example>

## Guidance

FileInput is a specialized input providing users a means to select a file or files for upload.

### Usage

- User must be able to upload a file by clicking the "Select file" button, dragging and dropping a file over the drop region, or tabbing to the FileInput and pressing the Spacebar or Enter key.
- When FileInput is in a Form, the file should not be uploaded/saved to a server until the user has submitted the form.
- Once a file has been added to the input, a button featuring a Trash icon will appear next to the file name allowing removal of that file.
- The "Select file" button should always be visible, allowing the user to add more files/replace a file after they have already selected one.

For additional configurations, such as defining accepted file type, all instrinsic HTML properties are supported. For a comprehensive list of these options, you can read more about [HTML input type="file"](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file).

## Variants

FileInputs may be configured for uploading single or multiple files.

### FileInput with multiple files

To allow multiple files to be uploaded, add the prop `multiple`.

<Example
  docs="https://v2.grommet.io/fileinput?theme=hpe#multiple"
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/apps/aries-site/src/examples/components/fileinput/FileInputMultipleExample.js"
>
  <FileInputMultipleExample />
</Example>

### FileInput validation

When a file provided to FileInput does not meet its validation criteria, such as file
size or type, ensure the user has means to remove the file from the input.

<Example code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/apps/aries-site/src/examples/components/fileinput/FileInputValidationExample.js">
  <FileInputValidationExample />
</Example>

### FileInput with file removal confirmation

In some cases, it may be appropriate to display a confirmation modal when a user attempts to remove a file. For example, if any time consuming file scanning processes have occurred, a confirmation modal should be used to avoid accidental file removal which results in the user needing to go through the file scanning processes again.

To see this behavior, add a file then click the "Trash" button to see the confirmation.

<Example code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/apps/aries-site/src/examples/components/fileinput/FileInputConfirmRemoveExample.js">
  <FileInputConfirmRemoveExample />
</Example>

### FileInput within a form

<ExampleImagePreview
  label="See FileInput Preview"
  href="/templates/forms#required-and-optional-fields"
  src="/fileinput-form-preview.png"
  alt="HPE Design System FileInput Form Example"
/>

## Accessibility

When using FileInput within a Form, the FormField wrapping the FileInput should have `htmlFor` and `name` properties that match the `id` and `name` properties placed onto the FileInput. Reference the [FileInput within a Form example](/templates/forms#required-and-optional-fields) to see how to implement.

**Filename truncation:**

If displaying the entire file name is critical to the users understanding of the component and the name is getting truncated, the `renderFile` property should be used to display the full file name.

### WCAG compliance

<AccessibilitySection title="fileinput" />
