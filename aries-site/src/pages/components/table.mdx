import { Anchor, Box, Image } from 'grommet';
import { Example } from '../../layouts';
import { ExampleImagePreview } from '../../components';
import {
  TableAnatomy,
  TableExample,
  TableFixedHeaderExample,
  TableMultiSelectExample,
} from '../../examples';

<Example
  code="https://raw.githubusercontent.com/hpe-design/design-system/master/aries-site/src/examples/components/table/TableExample.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  figma="https://www.figma.com/file/XEoIWIlLfcARRIFhkpFCch/HPE-Table-Component?node-id=195%3A0"
  height={{ min: 'small' }}
>
  <TableExample />
</Example>

## What Makes Up a Table?
Tables enable users to accomplish a task by finding records of interest, then take action against them.
They present structured data in a grid, with columns and rows to aid readability, scanability, and show 
the meaning of the data.

<TableAnatomy />

**Controls**<br />
Table controls should live above the table and facilitate a user's ability to locate and 
take actions against records of interest. A controls section may contain search and filter 
controls, as well as action controls such as batch applying settings or data export.
[About table controls >](#sorting)

**Columns**<br />
Contain a single data type and help users scan, read and take action through data.
They may be enhanced by allowing users to sort or filter records by the column's data.
[Column details >](#sorting)

**Rows**<br />
Rows help users scan, read and take action through data. 
They may be enhanced by actions such as selection and navigation to record detail.
[Row detail >](#record-selection)


**Cells**<br />
Commonly contain numerical and textual data, but may also include visuals such as meters, 
status indicators, anchors, and buttons.
[Cell variants, actions & behaviors >]()


## When to Use
Users interacting with a Table are trying to accomplish one of the following types of tasks.
They are not, however, trying to do all of these tasks at once.
Keeping "what is the user setting out to accompish?" at the center of our mindset helps guide which 
table features to include and, more importantly, exclude when we add a Table to our interfaces.

### Finding a Specific Record
Often, a user's task is to find and take action against a specific record. Whether it be 
finding a customer's record to review their chat history, tracking a particular order's 
status, etc., the user experience objective is to enable a user to locate that record as 
quickly as possible.

- Use Search. It can be as fast and efficient as it gets. 
- As backup, use sortable columns coupled with paginated results. This combination 
provides users with the knowledge of alpha-numeric range, enabling an 
educated guess as to the record's location in the sort.

<ExampleImagePreview
  label="See finding a specific record"
  href="#"
  src="/static/images/Finding_Specific_Records.png"
  alt="Example demonstrating how to find a record of interest with a Table"
/>

### Narrowing a Result Set
When a user is looking to focus on a group of records sharing similar characteristics, 
providing thoughtful filter controls allows for incremental reduction of the table's 
result set.

- Provide filter controls.
- Filter control input types should be chosen to best fit the data type and breadth of values.

<ExampleImagePreview
  label="Learn more about providing a great filter experience"
  href="#"
  src="/static/images/Finding_Specific_Records.png"
  alt="Example demonstrating how to find a record of interest with a Table"
/>

### Browsing a Result Set
Sometimes users are "checking up on things" or do not have specific records 
in mind. In this case, they are assessing the state of their records and the 
user experience objective is to facilitate the scanning of records to identify 
potential outliers or records which the user is unaware need attention or action.

- Use infinite scroll. In this scenario, infinite scroll removes friction, 
allowing users to browse records effortlessly.
- Consider adding column data types such as status indicators or meters 
which call attention to records needing attention.

<ExampleImagePreview
  label="Using infinite scroll with tables"
  href="#"
  src="/static/images/Finding_Specific_Records.png"
  alt="Example demonstrating how to find a record of interest with a Table"
/>

### Assembling a Data Set
Distinct from the user objectives above, tables containing data for analytical 
purposes deserve distinct treatments as well. While tables are useful for 
providing initial "discovery" type insights, such as identifying available attributes
and ranges of values, purpose built tools are often a better choice for conducting 
in depth analysis. In this scenario, a table's design should be optimized for 
assembling the data set for analysis and easy portability of that data into the 
user's preferred analytical tool.

- Provide filter controls.
- Filter control input types should be chosen to best fit the data type and breadth of values.
- Provide export capability for users to consume the data in their analytical 
tool of choice.
- Provide aggregate measures in the table footer.

<ExampleImagePreview
  label="Learn more about providing a great filter experience"
  href="#"
  src="/static/images/Finding_Specific_Records.png"
  alt="Example demonstrating how to find a record of interest with a Table"
/>

## Guidelines

### Search vs. Filter?
Complimenatary elements such as search or filters should be guided by the task the user 
is setting out to accomplish.
- Looking for a specific record? --> Search.
- Trying to narrow records down to a set of shared characteristics? --> Filter.
- Not quite certain for what I am looking, but I know its general characteristics? --> Filter.

[See Searching & Filtering]() for greater detail.

### Pagination vs. Infinite Scroll
Should be guided by the task the user is setting out to accomplish.

- Browsing? --> Infinite Scroll
  - Perhaps I am reviewing a customer's account history. I am not looking for 
  a particular record, rather I am in scanning mode, trying to get a sense of 
  the volume and types of interaction with a customer over time. Infinite Scroll 
  creates a nice, frictionless experirence for this to occur.
- Searching for a specific record? --> It depends.
  - Do you have a good search experience? --> Infinite Scroll
  - Do you have a performant API?
  - Do you require page reloads?
  - Is your data structured? 
- Do rows have many interactive elements? --> Pagination
  - Be mindful of keyboard users.

### How many columns?
The number of columns and rows should be guided by the task the user is setting 
out to accomplish.

Generally, if there are more than 5-7 columns in the table, it is a sign that 
a single table is trying to solve too many user problems at once. In that case, 
consider:
- Are there too many user persona types using this view? If so, are there opportunities 
to personalize the view by role?
- What are the user interactions leading up to the table view? Are there opportunities 
to improve navigation and build intentful user flows?
- Perhaps, it is unclear as to what the user problem the table is attempting 
to solve? A good opportunity for speaking to and learning from end users!

**The Exception**<br />
In an analytical context, where the goal is to assemble a data set and identify patterns 
within it, a larger number of columns may be neccessary.

In this context, a Table should facilitate the assembly of the data set and make the set 
accessible in a tool specifically designed for analysis.

## Behaviors & Actions

### Sorting

### Searching
[See Searching & Filtering]() for greater detail.

### Filtering
[See Searching & Filtering]() for greater detail.

### Record Selection


### Selecting Multiple Records & Batch Actions
<Example
  code="https://raw.githubusercontent.com/hpe-design/design-system/master/aries-site/src/examples/components/table/TableMultiSelectExample.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  height={{ min: 'small' }}
>
  <TableMultiSelectExample />
</Example>

### Fixed Column Headers
<Example
  code="https://raw.githubusercontent.com/hpe-design/design-system/master/aries-site/src/examples/components/table/TableFixedHeaderExample.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  height={{ min: 'small' }}
>
  <TableFixedHeaderExample />
</Example>

### Column Summary & Aggregation

<!-- To be added. Placeholders for future content.
### Pagination

### Infinite Scroll

## Table Cells
-->