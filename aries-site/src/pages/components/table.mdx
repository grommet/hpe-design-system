import { Anchor, Box, Image } from 'grommet';
import { Example } from '../../layouts';
import { ExampleImagePreview } from '../../components';
import {
  PaginationTableExample,
  TableAnatomy,
  TableExample,
  TableFixedHeaderExample,
  TableMultiSelectExample,
  TableResizeColumnsExample,
  TableSingleSelectExample,
  TableSortable,
  TableSummaryExample,
} from '../../examples';

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/components/table/TableExample.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  figma="https://www.figma.com/file/XEoIWIlLfcARRIFhkpFCch/HPE-Table-Component?node-id=195%3A0"
  showResponsiveControls={['laptop', 'mobile']}
  template
>
  <TableExample />
</Example>

## What makes up a table?

Tables enable users to accomplish a task by finding records of interest, then take action against them.
They present structured data in a grid, with columns and rows to aid readability, scanability, and show
the meaning of the data.

<TableAnatomy />

**Controls**<br />
Table controls should live above the table and facilitate a user's ability to locate and
take actions against records of interest. A controls section may contain [search and filter
controls](#searching-and-filtering-tables), as well as [action controls](#selecting-multiple-records-and-batch-actions)
such as batch applying settings or data export.

**Table header**<br />
Contain table header cells concisely labeling the column's contents.
Column headers may be enhanced by enabling [sorting](#sorting).

**Table body**<br />
Consists of rows allowing users to scan, read and take action on the data.
Rows may be enhanced by enabling actions such as [record selection](#selecting-single-records) and
navigation to a record's detailed view.

**Table footer**<br />
Optional. Used for presenting summary counts, sums, averages, and other [aggregations](#column-summaries-and-aggregation).

<!--
**Cells**<br />
Commonly contain numerical and textual data, but may also include visuals such as meters,
status indicators, anchors, and buttons.
[Cell variants, actions & behaviors >]()
-->

## When to use

Users interacting with a Table are trying to accomplish one of the following types of tasks.
They are not, however, trying to do all of these tasks at once.
Keeping "what is the user setting out to accompish?" at the center of our mindset helps guide which
table features to include and, more importantly, exclude when we add a Table to our interfaces.

### Finding a specific record

Often, a user's task is to find and take action against a specific record. Whether it be
finding a customer's record to review their chat history, tracking a particular order's
status, etc., the user experience objective is to enable a user to locate that record as
quickly as possible.

- Use Search. This is often the quickest, most efficient method for users to find a record of interest.
- As backup, use sortable columns coupled with paginated results. This combination
  provides users with the knowledge of alpha-numeric range, enabling an
  educated guess as to the record's location in the sort.

<ExampleImagePreview
  label="See finding a specific record"
  href="#searching-and-filtering-tables"
  src="/static/images/Searching_Data_Tables.png"
  alt="Example demonstrating how to find a record of interest with a Table"
/>

### Narrowing a result set

When a user is looking to focus on a group of records sharing similar characteristics,
providing thoughtful filter controls allows for incremental reduction of the table's
result set.

- Provide filter controls.
- Filter control input types should be chosen to best fit the data type and breadth of values.

<ExampleImagePreview
  label="Learn more about providing a great filter experience"
  href="#searching-and-filtering-tables"
  src="/static/images/Filtering_Data_Tables.png"
  alt="Example demonstrating how to find a record of interest with a Table"
/>

### Browsing a result set

Sometimes users are "checking up on things" or do not have specific records
in mind. In this case, they are assessing the state of their records and the
user experience objective is to facilitate the scanning of records to identify
potential outliers or records which the user is unaware need attention or action.

- Use infinite scroll. In this scenario, infinite scroll removes friction,
  allowing users to browse records effortlessly.
- Consider adding column data types such as status indicators or meters
  which call attention to records needing attention.

<ExampleImagePreview
  label="Using infinite scroll with tables"
  href="#use-pagination-or-infinite-scroll-with-tables"
  src="/static/images/Browsing_For_Outliers.png"
  alt="Example demonstrating how to find a record of interest with a Table"
/>

### Assembling a data set

Distinct from the user objectives above, tables containing data for analytical
purposes deserve distinct treatments as well. While tables are useful for
providing initial "discovery" type insights, such as identifying available attributes
and ranges of values, purpose built tools are often a better choice for conducting
in depth analysis. In this scenario, a table's design should be optimized for
assembling the data set for analysis and easy portability of that data into the
user's preferred analytical tool.

- Provide [filter controls](#searching-and-filtering-tables).
- Filter control input types should be chosen to best fit the data type and breadth of values.
- Provide export capability for users to consume the data in their analytical
  tool of choice.
- Provide aggregate measures in the [table footer](#column-summaries-and-aggregation).
- Organize table columns to group like elements and to keep most important elements to the left.

<!--
## Guidelines
-->

<!--
### How many columns?
The number of columns and rows should be guided by the task the user is setting
out to accomplish.

Generally, if there are more than 5-7 columns in the table, it is a sign that
a single table is trying to solve too many user problems at once. In that case,
consider:
- Are there too many user persona types using this view? If so, are there opportunities
to personalize the view by role?
- What are the user interactions leading up to the table view? Are there opportunities
to improve navigation and build intentful user flows?
- Perhaps, it is unclear as to what the user problem the table is attempting
to solve? A good opportunity for speaking to and learning from end users!

**The Exception**<br />
In an analytical context, where the goal is to assemble a data set and identify patterns
within it, a larger number of columns may be neccessary.

In this context, a Table should facilitate the assembly of the data set and make the set
accessible in a tool specifically designed for analysis.
-->

## Table behaviors & actions

### Sorting

Column headers behave as a button and perform the sort action. A caret icon indicates
the directionality and to which column the sort is currently applied.

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/components/table/TableSortable.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  showResponsiveControls={['laptop', 'mobile']}
>
  <TableSortable />
</Example>

### Resizeable columns

Columns can be resized if a DataTable has the `resizeable` prop applied. Column resizing allows the user to change the width of the header columns. Each column can be resized by
dragging the right side of its header to the left or to the right to expand the column.

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/components/table/TableResizeColumnsExample.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  showResponsiveControls={['laptop', 'mobile']}
>
  <TableResizeColumnsExample />
</Example>

### Searching and filtering tables

Complimenatary elements such as search or filters should be guided by the task the user
is setting out to accomplish.

- Looking for a specific record? --> Search.
- Trying to narrow records down to a set of shared characteristics? --> Filter.
- Not quite certain for what I am looking, but I know its general characteristics? --> Filter.

See [Filtering](/templates/filtering) for greater detail.

### Navigation via table

Clicking on a table row navigates to a page whose name matches the primary column in the row.

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/components/table/TableSingleSelectExample.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  showResponsiveControls={['laptop', 'mobile']}
>
  <TableSingleSelectExample />
</Example>

### Selecting multiple records & batch actions

Checkboxes allow for selection of multiple records, which then may apply
batch actions via action control buttons or menus.

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/components/table/TableMultiSelectExample.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  showResponsiveControls={['laptop', 'mobile']}
>
  <TableMultiSelectExample />
</Example>

### Paginated

With long sets of data, pagination can help to create a more efficient means of navigating to a specific item or range of items.

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/components/pagination/PaginationTableExample.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  showResponsiveControls={['laptop', 'mobile']}
>
  <PaginationTableExample />
</Example>

### Fixing header row and/or columns

Fixing or pinning header rows, columns, or footers allow users to track and
maintain context across long and wide data sets.

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/components/table/TableFixedHeaderExample.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  showResponsiveControls={['laptop', 'mobile']}
>
  <TableFixedHeaderExample />
</Example>

### Column summaries & aggregation

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/components/table/TableSummaryExample.js"
  docs="https://v2.grommet.io/datatable?theme=hpe#props"
  showResponsiveControls={['laptop', 'mobile']}
>
  <TableSummaryExample />
</Example>

### Use pagination or infinite scroll with tables

Should be guided by the task the user is setting out to accomplish.

- Browsing? --> Infinite Scroll
  - Perhaps I am reviewing a customer's account history. I am not looking for
    a particular record, rather I am in scanning mode, trying to get a sense of
    the volume and types of interaction with a customer over time. Infinite Scroll
    creates a nice, frictionless experirence for this to occur.
- Searching for a specific record? --> It depends.
  - Do you have a good search experience? --> Infinite Scroll
  - Do you have a performant API?
  - Do you require page reloads?
  - Is your data structured?
- Do rows have many interactive elements? --> Pagination
  - Be mindful of keyboard users.

<!-- To be added. Placeholders for future content.
### Pagination

### Infinite Scroll

## Table Cells
-->
