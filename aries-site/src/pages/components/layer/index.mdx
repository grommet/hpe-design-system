import { Button, Notification } from 'grommet';
import { FormNext } from 'grommet-icons';
import { Example, StyleTable } from '../../../layouts';
import {
  LayerAnatomy,
  LayerExample,
  LayerCenterExample,
  LayerNotificationExample,
  LayerSideDrawerExample,
  LayerStickyExample,
  LayerStickyScrollExample,
  ActionableLayerClose,
  InformationalLayerClose,
  LayerTypes,
} from '../../../examples';

<Example
  componentName="Layer"
  docs="https://v2.grommet.io/layer?theme=hpe#props"
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/components/layer/LayerExample.js"
  figma="https://www.figma.com/file/Ts53TAipMolmsv9DxWG3p0/HPE-Layer-Component?node-id=2%3A22"
  grommetSource="https://github.com/grommet/grommet/blob/master/src/js/components/Layer/Layer.js"
>
  <LayerExample />
</Example>

## When to use

A layer should be used to present information or task flows to the user without navigating them away from their current context.

## Anatomy

Basic anatomy and spacing that applies to all layer types.

<Example plain>
  <LayerAnatomy />
</Example>

| Label  | Region       | Purpose                                                | Required? | Notes                                                                      |
| ------ | ------------ | ------------------------------------------------------ | --------- | -------------------------------------------------------------------------- |
| **1**  | **Header**   | Identifies the layer.                                  | required  | --                                                                         |
| **1a** | **Title**    | A short, descriptive title identifying the layer.      | required  | Implemented as a Heading level 2, size="small".                            |
| **1b** | **Subtitle** | Any additional context or information about the layer. | optional  | --                                                                         |
| **2**  | **Body**     | Any additional content.                                | optional  | --                                                                         |
| **3**  | **Footer**   | Contains layer actions.                                | optional  | The ordering and alignment of footer actions depends on the type of layer. |

<StyleTable
  data={[
    {
      label: 4,
      property: 'pad',
      value: 'medium',
    },
    {
      label: 5,
      property: 'gap',
      value: 'medium',
    },
    {
      label: 6,
      property: 'round',
      value: 'small',
    },
    {
      label: 7,
      property: 'elevation',
      value: 'large',
    },
  ]}
/>

## Types of layers

Different use cases and content warrant different layer types. Learn more about each type below.

<LayerTypes />

## Layer closing behavior

The closing behavior and anatomy of a layer will differ depending on if the layer is informational or actionable.

### Informational

For informational layers that do not require any user actions, place a close button in the layer header.

<Example plain>
  <InformationalLayerClose />
</Example>

- The "X" button should close the layer.
- A user may also click outside of the layer or use the Escape key to close it. To implement, use `onClickOutside` and `onEsc` on Layer.

### Actionable

For actionable layers that require user actions, place a "Cancel" action alongside the other footer actions. In some cases, a label other than "Cancel" may be appropriate.

Do not include an "X" button in the header to avoid confusion of how the user should close the layer.

<Example plain>
  <ActionableLayerClose />
</Example>

- The "Cancel" button should reject any changes and close the layer.
  To prevent the user from losing progress due to accidental clicks outside of a layer or Escape key presses, `onEsc` and `onClickOutside` functionality should not be enabled.

<Notification
  status="info"
  message="The ordering and alignment of footer actions depends on the type of layer. See anatomy diagrams for specific layer types for details."
  actions={[
    {
      label: 'See layer types',
      icon: <FormNext />,
      href: '#types-of-layers',
      reverse: true,
    },
  ]}
  width="large"
  margin={{ bottom: 'medium' }}
/>

## Action label conventions

If a layer contains footer actions, the primary action should be labeled using verb + noun format (e.g., "Apply filters").

For any additional actions beyond the primary action, the noun may ommitted if you feel there will not be any ambiguity for the user with regards to what the action is referring to (e.g., "Reset" instead of "Reset filters").

When in doubt, follow the verb + noun convention to ensure clarity.

## Overflow behavior

If a layer contains filters, the footer actions should be persistent and sticky at the bottom of the layer.

If the layer contains a form, the footer actions should be at the bottom of the form to encourage the user to see the entire form before submission.

## Accessibility

### Layer titles

- Layer headings should be semantically correct.
- Treat a Layer as if it were a stand alone page, with the exception that the first heading within a Layer should be an `h2` or `<Heading level={2} />`.
- All subsequent headings should follow typical [semantic heading structure](/foundation/typography#semantic-usage-of-heading-levels).

### Close button

When using a Layer with `modal={false}`, it is critical that the focus is moved to the "Close" button inside the Layer. Give the close button an `a11yTitle` that provides the user with context that they are in a Layer.

For example, implementation of this "Close" button for a Layer would be:

```
<Button
  a11yTitle={`You are in a layer containing a form to add new hosts.
  To close this layer, press Enter.`}
  icon={<FormClose />}
  onClick={() => setShowLayer(false)}
  autoFocus
/>
```
