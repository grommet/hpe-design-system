import { Checkmark } from 'grommet-icons';
import { Example } from '../../../layouts';
import { CollapsedStateAnatomy, CreateCluster } from '../../../examples/templates/forms';

This pattern improves productivity by focusing a user's attention solely on the current 
object of interest, and uses collapsible objects to show or hide detail as needed. The 
intent is that collapsible objects reduce noise, clutter, and cognitive overload 
by hiding extraneous detail &mdash; and an easy means to view detail when needed.

## When to use

Use when a user's primary task is to create or configure a parent resource, but creating, 
updating, or removing child objects is a sub-task. This pattern provides users easy control 
over displaying detail as needed.

## Anatomy

The following illustrates the elements composing a child object in its collapsed and expanded 
states. View the [use case examples](#use-case-examples) to see how child objects behave and are presented in a form 
context.

### Collapsed state

<Example plain>
  <CollapsedStateAnatomy />
</Example>

| Label | Region         | Purpose                                                    | Required | Notes |
| ----- | -------------- | ---------------------------------------------------------- | :------: | ----- |
|       | Container      | Identfies the child and controls the show detail behavior. | <Checkmark a11yTitle="true" size="small" /> | The entirety of the container is focusable and expands to show detail with a mouse click, Enter key, or Spacebar. The aria-label should read "Show and edit detail." |
|       | Label          | Uniquely identifies each child object.                     | <Checkmark a11yTitle="true" size="small" /> | Should be implemented as a semantically correct heading to allow screen reader users to traverse between children. |
|       | Expand icon    | Visual treatment indicating show detail behavior.          | <Checkmark a11yTitle="true" size="small" /> | Icon name is "FormDown". | 
|       | Values summary | A preview summarizing the object's detail.                 | Optional |       |
|       | Border         | Provides visual distinction from other children.           | <Checkmark a11yTitle="true" size="small" /> |       |

### Expanded state

[Diagram to be inserted]

| Label | Region        | Purpose                                                     | Required | Notes |
| ----- | ------------- | ----------------------------------------------------------- | :------: | ----- |
|       | Header        | Identifies the child and controls the hide detail behavior. | <Checkmark a11yTitle="true" size="small" /> | The entirety of the container is focusable and hides detail with a mouse click, Enter key, or Spacebar. The aria-label should read "Hide detail." |
|       | Label         | Uniquely identifies each child object.                      | <Checkmark a11yTitle="true" size="small" /> | Should be implemented as a semantically correct heading to allow screen reader users to traverse between children. |
|       | Collapse icon | Visual treatment indicating hide detail behavior.           | <Checkmark a11yTitle="true" size="small" /> | Icon name is "FormUp". |
|       | Body          | Flexible region for presenting an object's detail.          | <Checkmark a11yTitle="true" size="small" /> | Detail presentation may vary by the use case. |
|       | Remove button | Removes/deletes the child from its parent.                  | <Checkmark a11yTitle="true" size="small" /> | Use the verb "remove" when removing the association between parent and child. Reserve the verb "delete" for actions where the child will no longer exist. | 
|       | Border        | Provides visual distinction from other children.            | <Checkmark a11yTitle="true" size="small" /> |       |

## Examples

### Children optional

Use cases where child objects are not required by the parent may use a semantically correct 
heading, optional description, and a secondary button labelled with an add action to the form.

[Example to be inserted]

### Children requried

For convenience, use cases where a parent can not be created without associating at least one 
child (e.g. creating a cluster) may present the first child object in its expanded state.

<Example 
  code={['', '']}
  github=''
  showResponsiveControls={[]}
>
  <CreateCluster />
</Example>

### Remove all action

When multiple children are associated with the parent, consider including a "Remove all" button 
to allow a user the ability to easily remove all associations with a single action.

[Example to be inserted]

Potential use cases to use as demonstration for the above examples:
- Add or edit user permissions
- Add rule
- Create a compute group
- Selected roles
- Selected datasets
- Selected hosts