import { Checkmark } from 'grommet-icons';
import { Annotation, Example } from '../../../layouts';
import {
  CollapsedStateAnatomy,
  CreateCluster,
  CreateRole,
  ExpandedStateAnatomy,
  EditRole,
} from '../../../examples/templates/forms';

This pattern improves productivity by focusing a user's attention solely on the current
object of interest, and uses collapsible objects to show or hide detail as needed. The
intent is that collapsible objects reduce noise, clutter, and cognitive overload
by hiding extraneous detail &mdash; and an easy means to view detail when needed.

## When to use

Use when a user's primary task is to create or configure a parent resource, but creating,
updating, or removing child objects is a sub-task. This pattern provides users easy control
over displaying detail as needed.

## Anatomy

The following illustrates the elements composing a child object in its collapsed and expanded
states. View the [examples](#examples) to see how child objects behave and are presented in a form
context.

### Collapsed state

<Example plain>
  <CollapsedStateAnatomy />
</Example>

|                 Label                  | Region             | Purpose                                                    |                  Required                   | Notes                                                                                                                                                                |
| :------------------------------------: | ------------------ | ---------------------------------------------------------- | :-----------------------------------------: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                 **1**                  | **Container**      | Identfies the child and controls the show detail behavior. | <Checkmark a11yTitle="true" size="small" /> | The entirety of the container is focusable and expands to show detail with a mouse click, Enter key, or Spacebar. The aria-label should read "Show and edit detail." |
|                 **2**                  | **Label**          | Uniquely identifies each child object.                     | <Checkmark a11yTitle="true" size="small" /> | Should be implemented as a semantically correct heading to allow screen reader users to traverse between children.                                                   |
|                 **3**                  | **Expand icon**    | Visual treatment indicating show detail behavior.          | <Checkmark a11yTitle="true" size="small" /> | Icon name is "FormDown".                                                                                                                                             |
|                 **4**                  | **Values summary** | A preview summarizing the object's detail.                 |                  Optional                   | Use `truncate` on Text to allow the summary to truncate if there is not sufficient width.                                                                            |
| <Annotation target="5" kind="style" /> | **Border**         |                                                            | <Checkmark a11yTitle="true" size="small" /> | Border is on top and bottom of child object. color="border-weak"                                                                                                     |

### Expanded state

<Example plain>
  <ExpandedStateAnatomy />
</Example>

| Label | Region            | Purpose                                                     |                  Required                   | Notes                                                                                                                                                                 |
| :---: | ----------------- | ----------------------------------------------------------- | :-----------------------------------------: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1** | **Header**        | Identifies the child and controls the hide detail behavior. | <Checkmark a11yTitle="true" size="small" /> | The entirety of the container is focusable and hides detail with a mouse click, Enter key, or Spacebar. The aria-label should read "Hide detail."                     |
| **2** | **Label**         | Uniquely identifies each child object.                      | <Checkmark a11yTitle="true" size="small" /> | Should be implemented as a semantically correct heading to allow screen reader users to traverse between children.                                                    |
| **3** | **Collapse icon** | Visual treatment indicating hide detail behavior.           | <Checkmark a11yTitle="true" size="small" /> | Icon name is "FormUp".                                                                                                                                                |
| **4** | **Body**          | Flexible region for presenting an object's detail.          | <Checkmark a11yTitle="true" size="small" /> | Detail presentation may vary by the use case.                                                                                                                         |
| **5** | **Remove button** | Removes/deletes the child from its parent.                  |               Case depending                | <span>Always provide unless at least one child object is required by the parent. See [Required children](#required-children) for detail.</span> Icon name is "Trash". |

## Examples

### Optional children

Use cases where child objects are not required by the parent may use a semantically correct
heading, optional description, and a secondary button labelled with an add action to the form.

<Example
  code={[
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/managing-child-objects/CreateRole.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FormChildObject/FormChildObjects.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FormChildObject/FormChildObject.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FormChildObject/ChildHeader.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/ButtonGroup/ButtonGroup.js',
  ]}
  github="https://github.com/grommet/hpe-design-system/blob/master/aries-site/src/examples/templates/forms/managing-child-objects/CreateRole.js"
  showResponsiveControls={[]}
>
  <CreateRole />
</Example>

### Required children

For convenience, use cases where a parent can not be created without associating at least one
child (e.g. creating a cluster) may present the first child object in its expanded state.

<Example
  code={[
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/managing-child-objects/CreateCluster.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FormChildObject/FormChildObjects.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FormChildObject/FormChildObject.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FormChildObject/ChildHeader.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/ButtonGroup/ButtonGroup.js',
  ]}
  github="https://github.com/grommet/hpe-design-system/blob/master/aries-site/src/examples/templates/forms/managing-child-objects/CreateCluster.js"
  showResponsiveControls={[]}
>
  <CreateCluster />
</Example>

### Remove all action

When multiple children are associated with the parent, consider including a "Remove all" button
to allow a user the ability to easily remove all associations with a single action.

<Example
  code={[
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/managing-child-objects/EditRole.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FormChildObject/FormChildObjects.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FormChildObject/FormChildObject.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FormChildObject/ChildHeader.js',
    'https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/ButtonGroup/ButtonGroup.js',
  ]}
  github="https://github.com/grommet/hpe-design-system/blob/master/aries-site/src/examples/templates/forms/managing-child-objects/EditRole.js"
  showResponsiveControls={[]}
>
  <EditRole />
</Example>
