import { Example } from '../../layouts';
import {
  FilteringCards,
  FilteringLists,
  FilteringTable,
  FilteringWithRangeSelector,
  FilteringWithDropButton,
  FilteringWithSelect,
} from '../../examples';

<Example
  code={[
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/filtering/FilteringCards/FilteringCards.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/FiltersContext.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/FilterControls.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/Filters.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/FiltersLayer.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/ResultsSummary.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/SearchFilter.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/filterTypes/FilterCheckBoxGroup.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/filterTypes/FilterRangeSelector.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/filtering/FilteringCards/mockData.js",
  ]}
  figma="https://www.figma.com/file/EA0OZFdocKVcQ55c7Jainb/HPE-Filter-Templates?node-id=681%3A1430"
  showResponsiveControls={['laptop', 'mobile']}
  template
>
  <FilteringCards />
</Example>


## What makes up filtering?

Filtering allows data to be narrowed down around a set of specified parameters. When users may not have a specific record in mind but are seeking to group data around a certain set of attributes, filtering should be used to allow the user to narrow the data and take action on relevant records.

If a user will likely be looking for a specific record as opposed to groups of data, consider implementing search.

### Controls

Filter controls should live above the data content and facilitate a user's ability to locate and take actions against records of interest.

### Filters

The way filters are displayed is dependent on the use case, number of filters, and data types of the content. These [general guidelines](#guidelines) are a starting point for how to present filtering in your application, but it's important to consider each recommendation in the context of your application's use cases.

### Results

Results should live below the controls and display any records that meet filter criteria.
Depending on the data types and use case, results may be represented by a
[List](/templates/lists), [Cards](/components/card), or [Table](/components/table).

### Pagination

If the number of records displayed per page is limited, pagination should be placed underneath the results.

## When to use

### Filters in a center Layer

When applying many filters at once, it is helpful to present them in a consolidated [Layer](/components/layer). In this example, the Layer is positioned at the center of the screen.

<Example
  code={[
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/filtering/FilteringLists/FilteringLists.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/FiltersContext.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/FilterControls.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/Filters.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/FiltersLayer.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/ResultsSummary.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/SearchFilter.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/filterTypes/FilterCheckBoxGroup.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/filterTypes/FilterRangeSelector.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/filtering/FilteringCards/mockData.js",
  ]}
  showResponsiveControls={['laptop', 'mobile']}
  template
>
  <FilteringLists />
</Example>

### Filtering with selectable results

The summary displayed beneath the search input should always reflect the user's actions. When filtering is combined with selection, the summary text should adjust for the following scenarios:
- No filters, no selections &mdash; The summary should read "X items", where X is the total number of items.
- Filters applied, no selections &mdash; The summary should read "X results of Y items".
- Selections made &mdash; The search input and filtering button should be replaced with a Box with `background="background-back"`. This Box should contain a summary that reads "X items of Y results selected".  A "Clear Selection" button should be available to allow the user to clear all of their selections. Any additional actions that can be applied to the selected items should also be placed in this Box and justified to the right side of the screen.

<Example
  code={[
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/filtering/FilteringTable/FilteringTable.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/FiltersContext.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/FilterControls.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/Filters.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/FiltersLayer.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/ResultsSummary.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/SearchFilter.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/FilterControls/filterTypes/FilterCheckBoxGroup.js",
    "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/filtering/FilteringTable/mockData.js",
  ]}
  showResponsiveControls={['laptop', 'mobile']}
  template
>
  <FilteringTable />
</Example>

## Guidelines

Filtering should help users quickly narrow down data sets by selecting certain parameters to define the relevant data bounds. Different types of inputs may better suited for filtering depending on the type of data.

Use your best judgement around which input type is appropriate for the data you are filtering. However, here are a few things to consider:

- **Is data presented as Cards or List?** When there is ample screen space, display the filters to the left of the data as [a persistent column](/templates/filtering). Once space becomes limited, use a single filter button that opens a Layer containing the filters.
- **Is there more than one filter?** Use a single button with filter icon that [opens a Layer containing the filters](#filters-in-a-right-anchored-layer).
- **Is the user going to be selecting multiple options?** Filter with [CheckBoxGroup](#filters-in-a-center-layer).
- **Is the user aiming to filter based on a range?** Filter with [RangeSelector](#filtering-with-rangeselector).
- **Does your filter have a large number of options (>10)?** Filter with [CheckBoxGroup in a side-anchored Layer](#filters-in-a-right-anchored-layer). Present a prioritized subset of the options to the user first and provide an accompanying "Show more" anchor that will reveal the rest of the options when clicked. When utilizing the "Show more", your filters should be displayed in a side-anchored modal since it provides an intuitive vertical scrolling behavior.
- **Does your filter have a massive number of options (>100)?** First consider if you are able to break this filter into more manageable groupings. However, if you are unable to break up the filter options into smaller groups, consider using a [scrollable CheckBoxGroup](/components/checkboxgroup#scroll). This approach should be used as a last resort since research demonstrates that [this pattern is not ideal for user experience](https://baymard.com/blog/inline-scroll-areas).

## More examples of filtering

### Filtering with RangeSelector

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/filtering/FilteringWithRangeSelector.js"
  template
  showResponsiveControls={['laptop', 'mobile']}
>
  <FilteringWithRangeSelector />
</Example>

### Filtering with Select

Filtering with Select should be used when the goal of the user will likely be to filter data around one specific criteria. If the user will be selecting multiple criteria, consider using CheckBoxGroup.

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/filtering/FilteringWithSelect.js"
  template
  showResponsiveControls={['laptop', 'mobile']}
>
  <FilteringWithSelect />
</Example>
