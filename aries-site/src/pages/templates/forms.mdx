import {
  ChangePasswordExample,
  ColumnFormDont,
  CustomizeExample,
  FilterExample,
  FullPageFormExample,
  RequiredFieldsExample,
  PayExample,
  SettingsExample,
  ShippingExample,
  SignInExample,
  SimpleSignUpExample,
  SignUpExample,
  SingleFormFieldExample,
  SortExample,
} from '../../examples';
import { ExampleImagePreview } from '../../components';
import { Image } from 'grommet';
import { Example } from '../../layouts';
import { formLayouts } from '../../data/structures';

<Example
  code={["https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SimpleSignUpExample.js",
        "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/utils/FormValidation.js"]}
  docs="https://v2.grommet.io/form?theme=hpe"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=1807%3A734"
>
  <SimpleSignUpExample />
</Example>

## When to use

To efficiently capture information necessary for completing a task.

## When not to use

Complicated processes where the user might need guidance at various stages, or when the form would be intimidatingly long. In these cases use a [Wizard](https://design-system.hpe.design/templates/wizard?q=error#guidance).

## Do's

**Required fields**

- Ask only for the required information. Keep the fields to a minimum to allow the user to finish their task as quickly as possible.
- List only the most common field requirements below the relevant field.
- Use asterisks for required fields when the form has more than two required fields and/or has optional fields.
- Asterisks for required fields should be the same color as label field.
- If a field is optional, write "Optional" next to the form field label.

**Format and fields**

- User-entered input must be encoded to prevent [SQL injection](https://www.w3schools.com/sql/sql_injection.asp) and [XSS attacks](https://en.wikipedia.org/wiki/Cross-site_scripting).
- Wrap all input elements within a FormField `<FormField label="Username"><TextInput /></FormField>`
- Reveal fields progressively so the user is not overwhelmed.
- Write in sentence case (capitalize the first letter and all following letters should be lowercase).
- Fill in default values for as many fields as possible.
- Use clear, concise labels for each field.
- Write helpful placeholder text inside the fields.
- If the user will likely have doubts about how to complete an input, include helpful text below the field, such as [password requirements](#signup) or [additional resources](#customize) on a field's context.
- Place the submit, reset, and cancel buttons at the bottom left of the form. [See responsive button behavior](https://design-system.hpe.design/components/button#responsiveness).
- Use specific labels on buttons that tell the user what action to expect.

**Actions after the user submits information**

- Provide feedback when the form is submitted successfully (e.g. notification, success page, green check mark, etc.).
- [In the case of an error](#requiredoptional), red highlight the field where the error occurred.
- List all errors and the corrective action the user must take. Place inline when possible. Otherwise, list above the submit button.
- Allow the user to continue navigating through the application immediately.

## Don'ts

**Required fields**

- Use asterisks for sign up and sign in forms. This can be implemented using `required={{ indicator: false }}`.
- Use red asterisks, because has shown to actually decrease success in filling out the form.
- List rejection criteria that the user is unlikely to input (ex. double hyphens, starting with a space, etc.). Only alert them when they type the error.

**Format and fields**

- Have more than two optional fields.
- Repeat the field label as placeholder text.
- Use generic labels on buttons, such as “Yes," or "No." Instead use labels such as "Save," "Publish," "Create Project," etc.
- Restrict resource naming. Allow spaces, punctuation and unicode characters (ex. Björk Guðmundsdóttir, 联想, John Q. Public, etc.).

## Accessibility

Form inputs must be accompanied by a label that identifies itself to screen readers. Placing all inputs within a Grommet FormField and applying the guidance below play a big role in ensuring the inputs are accessible.

**FormFields must include:**

- A "for" property that matches the `id` of its child input. If using Grommet, this is applied with the `htmlFor` property.

```
<FormField
  label="Username"
  htmlFor="example-username"
  name="example-username"
  >
   <TextInput id="example-username" name="example-username" />
</FormField>
```

- A `name` property applied on both the FormField and its child input element.
- A clear, concise label.
- Ensure that users can tab through fields and buttons in a logical order and not have to use arrow keys.

[View the accessibility guidance page if you'd like to use simulators, testing tools, and other resources](https://design-system.hpe.design/foundation/accessibility?q=acce).

## Terms and Conditions

Users must actively check a box next to a statement that shows they have agreed to the Terms and Conditions when signing up for an account. For easy access and quick reference, the legal agreement is a simple link in the text.

## Single field forms

- For [single form fields](#single-required-formfield) (ex: delete confirmation request), use an asterisk to denote that it is a "required" field. This can avoid user confusion and reduce the chance of "required" input error.

## Use cases

### Sign up

<Example
  code={["https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SignUpExample.js",
       "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/utils/FormValidation.js"]}
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=1807%3A734"
>
  <SignUpExample />
</Example>

### Sign in

<Example
  code={["https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SignInExample.js",
        "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/utils/FormValidation.js"]}
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A499"
>
  <SignInExample />
</Example>

### Filter

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/FilterExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A527"
>
  <FilterExample />
</Example>

### Sort

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SortExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A562"
>
  <SortExample />
</Example>

### Change password

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/ChangePasswordExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A542"
>
  <ChangePasswordExample />
</Example>

### Settings

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SettingsExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A459"
>
  <SettingsExample />
</Example>

### Pay

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/PayExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A431"
>
  <PayExample />
</Example>

### Shipping

<Example
  code={["https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/ShippingExample.js",
        "https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/utils/FormValidation.js"]}
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A382"
>
  <ShippingExample />
</Example>

### Customize

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/CustomizeExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A608"
>
  <CustomizeExample />
</Example>

## Required vs optional fields

For standard forms, use an asterisk(\*) to indicate required field/controls.

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/RequiredFieldsExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=2668%3A3582"
>
  <RequiredFieldsExample />
</Example>

### Single required FormField

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SingleFormFieldExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=5942%3A12303"
>
  <SingleFormFieldExample />
</Example>

## Fields with character limits

**When to use**

In cases where the user is given an opportunity to express themselves or would likely exceed a field's character limit. Examples include some description fields, feedback, feature requests, reporting issues, etc.

**Guidance**

- Place the character counter at the bottom right of the field.
- See guidance on [character limits for fields](/components/tag#anatomy). Note that your backend may have character limitations. When you can choose the character limits, however, set a generous number to avoid frustrating the user. A suggestion to ensure your limit is user-friendly is to check the analytics to see how long it is taking your users to complete this task. Longer than usual time could indicate the character limits are too low. Increase accordingly.
- Use a numerator/denominator format. Ex. 0/128.
- Show the progression in the numerator as the user is typing. Ex. 52/128 if the user has typed 52 characters, 53/128 when they type an extra character, 54/128, 55/128, etc.
- Use default text styling.
- Make the field roughly the same size as the character limit.
- Red highlight the field when the user meets the character limitation.

**Accessibility**

- Announce the max character allowed before the user begins typing.
- Announce when the user has typed 50% of the max allowed.

### Exceptions and how to address them

- A login/registration form, which typically shows two to three required fields do not need to be annotated in any way - the form is short and the necessity of completing the fields is standard practice.

  - For login/registration forms, apply `required={{ indicator: false }}` to the FormFields to remove the required indicator.

- Forms with minimal fields are optimal, but occasionally, capturing extra information would be highly beneficial for the user. The following are some options for addressing these cases:

  - Create the form the optimal way; with only the minimum required fields so that the user can focus on completing their task. Separately, in a preferences or settings dashboard, for example, provide a form that allows the user to add helpful, optional information at another time. An example of a helpful but not required field could be asking for someone's official title or role. If it is not necessary to capture this information right away on a sign-in form, offer this "role" or "title" field in profile settings.

  - However, add the optional field if there is compelling evidence that the user’s experience would be greatly improved if they could input this extra information in this initial form. Ensure to mark the field as optional.

<ExampleImagePreview
  label="Forms where 'asterisk' and 'optional' can be skipped"
  src="/form-example-nonrequired.png"
  href="#sign-in"
  alt="HPE Design System Form where required and optional can be skipped"
/>

## Forms in layers vs. full page 


- Single column form layout creates a clear focused path to completion for the user.
- Multi-column layouts can cause users to skip important fields, input data in a wrong field, or simply hinder efficiency which leads to frustration or even abandonment. 
- Display no more than 10 form fields with in the same viewport so that users are not intimidated with seeing a long page filled with form fields and sections.
- Use a [Center modals](https://design-system.hpe.design/components/layer#center-modal) instead of side drawer to display information without leaving the current contexts. 

<Example>
  <FullPageFormExample />
</Example>

### Avoid using multiple column layouts

Single-column layouts create clear paths for users.
Multi-column layouts can inadvertently cause users to skip important fields, input data in the wrong field, or simply prevent progress; all of which can lead users to abandon forms.

<BestPracticeGroup>
  <Example
    bestPractice={{
      type: 'do',
      message:
        'One column layer to create a clear path to completion for the user.',
    }}
  >
    <ShippingExample />
  </Example>
  <Example
    bestPractice={{
      type: 'dont',
      message: `Avoid using multiple-column form layout.`,
    }}
  >
    <ColumnFormDont />
  </Example>
</BestPracticeGroup>
